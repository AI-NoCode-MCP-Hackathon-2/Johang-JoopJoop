# 조항줍줍 프로젝트 진행사항

## 날짜: 2025-11-26

---

## 1단계: 프로젝트 기본 설정

### 완료 항목
- 프로젝트 초기 파일 구조 확인
- 의존성 설치 문제 해결
  - `npm install --include=dev` 실행하여 devDependencies 포함 모든 패키지 설치
  - React 19.2, TypeScript 5.8, Vite 6.2 설정 완료

### 설치된 주요 패키지
```json
{
  "dependencies": {
    "@google/generative-ai": "^0.24.1",
    "lucide-react": "^0.554.0",
    "react": "^19.2.0",
    "react-dom": "^19.2.0"
  },
  "devDependencies": {
    "@types/node": "^22.14.0",
    "@types/react": "^19.2.7",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.0.0",
    "typescript": "~5.8.2",
    "vite": "^6.2.0"
  }
}
```

---

## 2단계: 마이페이지 기능 구현

### 새로 생성된 파일
1. **components/AnalysisHistoryContext.tsx**
   - 분석 이력 관리를 위한 Context API 구현
   - LocalStorage를 사용한 사용자별 분석 기록 저장
   - 위험도(low, medium, high) 기반 분석 결과 저장
   - 기능:
     - `addRecord`: 새로운 분석 기록 추가
     - `clearRecordsForCurrentUser`: 현재 사용자의 모든 기록 삭제
     - 사용자별 데이터 분리 (`jj_history_${userId}`)

2. **components/MyPage.tsx**
   - 사용자 프로필 및 분석 이력 페이지
   - 기능:
     - 사용자 정보 표시 (이름, 이메일, 로그인 방식)
     - 오늘 남은 점검 횟수 표시 (5회 제한)
     - 분석 이력 목록 (시간순 정렬)
     - 위험도별 색상 뱃지 (위험/주의/양호)
     - 이력 전체 삭제 기능
   - 비로그인 상태: 로그인 유도 화면 표시

### 수정된 파일
1. **App.tsx**
   - `AnalysisHistoryProvider`로 전체 앱 감싸기
   - `MyPage` 컴포넌트 import 및 라우팅 추가
   - Page 타입에 'mypage' 추가

2. **components/Navbar.tsx**
   - 데스크톱 사용자 메뉴에 "마이페이지" 링크 추가
   - 모바일 메뉴에 "마이페이지" 링크 추가
   - 클릭 시 'mypage' 페이지로 네비게이션

3. **components/PreCheckSection.tsx**
   - `useAnalysisHistory` 훅 통합
   - 분석 완료 시 `addRecord` 호출하여 이력 자동 저장
   - 파일명, 위험도, 타이틀 저장

---

## 3단계: Google Gemini API 통합

### 새로 생성된 파일
1. **utils/gemini.ts**
   - Google Generative AI SDK 통합
   - Gemini 2.0 Flash Exp 모델 사용
   - 계약서 분석 함수 구현:
     - `analyzeContract`: 계약서 텍스트를 받아 위험 조항 분석
     - 대한민국 근로기준법 기반 분석
     - JSON 형식 응답 파싱
     - 위험도 3단계 분류
     - 위험 조항, 법률 위반 사항, 3줄 요약 제공

2. **.env**
   - Gemini API 키 저장
   - `VITE_GEMINI_API_KEY` 환경 변수 설정
   - 주의: Git에 커밋되지 않도록 .gitignore에 추가됨

### 수정된 파일
1. **components/PreCheckSection.tsx**
   - 실제 파일 업로드 기능 구현
   - `extractTextFromFile`: 파일에서 텍스트 추출
   - Gemini API를 사용한 실시간 분석
   - 분석 결과 동적 표시
   - 파일 선택 UI 개선
   - 로딩 상태 관리

2. **.gitignore**
   - 환경 변수 파일 제외 추가:
     - `.env`
     - `.env.local`
     - `.env.*.local`

---

## 4단계: 문서화

### 수정된 파일
1. **README.md**
   - 해커톤 심사위원용으로 전문적인 내용으로 전면 수정
   - 이모티콘 제거
   - 주요 섹션:
     - 프로젝트 소개
     - 주요 기능 (마이페이지, AI 분석 포함)
     - 기술 스택 (Gemini API 추가)
     - 프로젝트 구조 상세화
     - 로컬 실행 방법 (환경 변수 설정 포함)
     - 주요 구현 내용
     - 향후 개발 계획
     - 법적 책임 한계
   - GitHub 링크 및 개발자 정보 추가

---

## 현재 상태

### 실행 중인 서버
- 개발 서버: `http://localhost:3000/`
- 상태: 정상 작동 중

### 빌드 상태
- TypeScript 컴파일: 에러 없음
- 프로덕션 빌드: 성공
- 빌드 결과:
  - `dist/index.html`: 1.64 kB
  - `dist/assets/index-*.js`: ~325 kB

### 구현 완료 기능
1. 랜딩 페이지 및 서비스 소개
2. 사용자 인증 (Mock, LocalStorage 기반)
3. 계약서 파일 업로드
4. Google Gemini AI 기반 실시간 분석
5. 분석 결과 표시 (위험 조항, 법률 위반, 요약)
6. 마이페이지 (프로필, 분석 이력)
7. 1일 5회 점검 제한 UI
8. 반응형 디자인

---

## 다음 단계 (미완료)

### 백엔드 연동
- [ ] 실제 인증 서버 구축
- [ ] OAuth 2.0 소셜 로그인 실제 구현
- [ ] 데이터베이스 연동 (분석 이력 영구 저장)
- [ ] 1일 5회 제한 서버 측 검증

### 기능 개선
- [ ] PDF 파일 텍스트 추출 기능 (현재 TXT만 지원)
- [ ] 분석 결과 PDF 다운로드
- [ ] 챗봇 페이지 구현
- [ ] 전문가 연결 페이지
- [ ] 결제 시스템 (횟수 충전)

### 배포
- [ ] Render 배포 설정
- [ ] 환경 변수 설정
- [ ] 도메인 연결

---

## 기술적 이슈 및 해결

### 이슈 1: devDependencies 미설치
- **문제**: `npm install` 시 devDependencies가 설치되지 않음
- **해결**: `npm install --include=dev` 사용

### 이슈 2: TypeScript 에러
- **문제**: React 및 React-DOM 타입 정의 누락
- **해결**: `@types/react`, `@types/react-dom` 설치

### 이슈 3: Gemini API 키 보안
- **문제**: API 키를 Git에 커밋하면 안 됨
- **해결**: `.env` 파일 사용 및 `.gitignore`에 추가

---

## 참고 사항

### API 사용
- Google Gemini 2.0 Flash Exp 모델 사용
- API 키는 환경 변수로 관리
- 무료 티어 제한 확인 필요

### 데이터 저장
- 현재 LocalStorage 사용 (클라이언트 측)
- 브라우저 데이터 삭제 시 모든 이력 손실
- 프로덕션에서는 서버 DB 필요

### 법적 고지
- 본 서비스는 법률 자문을 대체하지 않음
- 모든 페이지에 면책 조항 표시
- 전문가 상담 권장 안내

---

## 5단계: 계정 관리 및 일일 사용 제한 강화 (2025-11-26)

### 수정된 파일
1. **components/AuthContext.tsx**
   - User 인터페이스에 필드 추가:
     - `lastCheckDate?: string`: 마지막 점검 날짜 (일일 리셋용)
     - `password?: string`: Mock 비밀번호 저장
   - 새로운 메소드 추가:
     - `updateProfile`: 프로필 정보 업데이트 (이름, 이메일)
     - `changePassword`: 비밀번호 변경 (이메일 로그인 사용자만)
     - `deleteAccount`: 계정 및 분석 이력 삭제
     - `sendPasswordResetEmail`: 비밀번호 재설정 이메일 (Mock)
     - `canUseCheck`: 남은 점검 횟수 확인
     - `consumeCheck`: 점검 횟수 차감
   - 일일 자동 리셋 로직:
     - `getTodayStr()`: 오늘 날짜 문자열 생성
     - `checkAndResetQuota()`: 날짜 변경 시 자동으로 5회 복구
   - 로그인/회원가입 시 lastCheckDate와 password 저장

2. **components/AuthModal.tsx**
   - mode 타입에 'reset' 추가 (로그인, 회원가입, 비밀번호 재설정)
   - 비밀번호 재설정 모드 UI 추가
   - 성공 메시지 표시 기능 추가
   - reset 모드에서는 비밀번호 입력 필드 숨김
   - reset 모드에서는 SNS 로그인 버튼 숨김
   - footer에 reset 모드 전환 버튼 추가

3. **components/MyPage.tsx**
   - 계정 관리 섹션 추가:
     - 프로필 수정: 이름, 이메일 변경 폼
     - 비밀번호 변경: 이메일 로그인 사용자 전용, 현재/새 비밀번호 입력
     - 계정 삭제: 영구 삭제 확인 후 실행
   - useState 훅 추가:
     - `isEditingProfile`, `isChangingPassword`: 폼 토글 상태
     - `profileName`, `profileEmail`: 프로필 입력값
     - `currentPassword`, `newPassword`: 비밀번호 변경 입력값
     - `error`, `success`: 에러/성공 메시지
   - 핸들러 함수:
     - `handleUpdateProfile`: 프로필 업데이트 처리
     - `handleChangePassword`: 비밀번호 변경 처리
     - `handleDeleteAccount`: 계정 삭제 확인 및 처리
   - 에러/성공 메시지 알림 UI 추가
   - 소셜 로그인 사용자는 비밀번호 변경 버튼 숨김

4. **components/PreCheckSection.tsx**
   - `canUseCheck()` 사용: 분석 전 점검 횟수 확인
   - `consumeCheck()` 사용: 분석 성공 후 점검 횟수 차감
   - 점검 횟수 소진 시 안내 alert 표시

### 개선 내용
- 일일 사용 제한이 자동으로 자정에 리셋됨
- 사용자가 프로필 정보를 직접 수정 가능
- 이메일 로그인 사용자는 비밀번호 변경 가능
- 계정 삭제 시 분석 이력도 함께 삭제
- 비밀번호 재설정 이메일 전송 기능 (Mock)
- 점검 횟수 확인 및 소진 방지 로직 추가

---

## 현재 상태 (업데이트)

### 실행 중인 서버
- 개발 서버: `http://localhost:3000/`
- 상태: 정상 작동 중 (Hot reload 활성화)

### 구현 완료 기능 (전체)
1. 랜딩 페이지 및 서비스 소개
2. 사용자 인증 (Mock, LocalStorage 기반)
3. 계약서 파일 업로드
4. Google Gemini AI 기반 실시간 분석
5. 분석 결과 표시 (위험 조항, 법률 위반, 요약)
6. 마이페이지 (프로필, 분석 이력)
7. **계정 관리 (프로필 수정, 비밀번호 변경, 계정 삭제)** (NEW)
8. **일일 자동 리셋되는 점검 횟수 제한** (NEW)
9. **비밀번호 재설정 기능** (NEW)
10. 반응형 디자인

---

## 6단계: Pricing 페이지 및 업그레이드 연결 구현 (2025-11-26)

### 새로 생성된 파일
1. **components/PricingPage.tsx**
   - 요금제 전용 페이지 구현
   - 3가지 플랜 표시:
     - Free: 하루 5회 무료 (현재 이용 중)
     - Pro 구독: 월 100회, 우선 처리, PDF 다운로드, 1:1 문의 (₩9,900/월)
     - 회차 충전: 10/30/50회 패키지 (₩1,000~)
   - FAQ 섹션 추가
   - 데모 버전 경고 및 면책 조항
   - 반응형 그리드 레이아웃

### 수정된 파일
1. **App.tsx**
   - PricingPage import 추가
   - Page 타입에 'pricing' 추가
   - PreCheckSection에 onNavigate prop 전달
   - pricing 페이지 라우팅 추가

2. **components/Navbar.tsx**
   - navLinks에 '요금제' 링크 추가 (전문가 연결과 FAQ 사이)

3. **components/PreCheckSection.tsx**
   - onNavigate prop 추가
   - 한도 초과 시 "요금제 자세히 보기" 버튼 추가
   - 업그레이드 UI의 Pro/충전권 버튼이 pricing 페이지로 이동

### 개선 내용
- 사용자가 한도 초과 시 요금제 페이지로 쉽게 이동 가능
- 명확한 가격 정보 및 플랜 비교 제공
- FAQ를 통한 사용자 궁금증 해소
- 데모 버전임을 명확히 표시하여 혼란 방지

---

## 현재 상태 (최종 업데이트)

### 실행 중인 서버
- 개발 서버: `http://localhost:3000/`
- 상태: 정상 작동 중 (Hot reload 활성화)

### 구현 완료 기능 (전체)
1. 랜딩 페이지 및 서비스 소개
2. 사용자 인증 (Mock, LocalStorage 기반)
3. 계약서 파일 업로드
4. Google Gemini AI 기반 실시간 분석
5. 분석 결과 표시 (위험 조항, 법률 위반, 요약)
6. 마이페이지 (프로필, 분석 이력)
7. 계정 관리 (프로필 수정, 비밀번호 변경, 계정 삭제)
8. 일일 자동 리셋되는 점검 횟수 제한
9. 비밀번호 재설정 기능
10. 반응형 디자인
11. **챗봇 페이지 (노동 관련 Q&A)**
12. **전문가 연결 및 공공기관 안내 페이지**
13. **요금제 페이지 및 업그레이드 연결** (NEW)

---

## 7단계: 로그인/회원가입 플로우 배선 개선 (2025-11-26)

### 수정된 파일
1. **components/AuthModal.tsx**
   - onAuthSuccess 콜백 prop 추가 (인증 성공 시 부모에게 알림)
   - onSwitchMode 시그니처 변경 (모드 직접 전달: `(mode: AuthMode) => void`)
   - 모달 열릴 때 상태 자동 리셋 (useEffect)
   - 비밀번호 재설정 성공 메시지 UI 추가 (로그인 화면으로 이동 버튼 포함)
   - 리셋 모드에서 뒤로가기 버튼 추가 (ArrowLeft 아이콘)
   - 로그인 모드에서 "비밀번호를 잊으셨나요?" 링크 추가
   - 회원가입/로그인/Provider 성공 시 onAuthSuccess 호출
   - 성공 메시지 표시 시 폼과 푸터 숨김

2. **App.tsx**
   - AppContent 컴포넌트로 분리 (useAuth 훅 사용)
   - 전역 AuthModal 상태 관리 추가 (isAuthModalOpen, authModalMode)
   - 인증 성공 시 환영 배너 표시 (authWelcomeAction)
   - 환영 배너 4초 자동 숨김 useEffect
   - handleAuthSuccess 핸들러 추가 (모달 닫기, 홈으로 이동, 환영 배너 표시)
   - handleRequestPreCheck 핸들러 추가 (미로그인 시 회원가입 모달 오픈, 로그인 시 점검 페이지로 이동)
   - CheckCircle2 아이콘 import
   - Hero에 onRequestPreCheck prop 전달
   - 전역 AuthModal 렌더링

3. **components/Hero.tsx**
   - onRequestPreCheck prop 추가
   - handleCtaClick 함수 추가 (onRequestPreCheck 우선, 없으면 onNavigate('check'))
   - CTA 버튼 클릭 시 인증 상태 확인 로직 추가
   - 미로그인 시 회원가입 모달 오픈, 로그인 시 점검 페이지로 이동

### 개선 내용
- Hero 페이지 CTA 버튼이 로그인 상태에 따라 다르게 동작
- 로그인/회원가입 성공 후 환영 배너로 사용자에게 피드백
- 비밀번호 재설정 플로우 UX 개선
- 인증 모달 상태 리셋으로 더 깔끔한 사용자 경험
- 로그인 화면에서 비밀번호 찾기 접근성 향상

### UI/UX 상세
- **환영 배너**: 홈 페이지 상단에 고정, teal 배경, CheckCircle2 아이콘
  - 회원가입: "회원가입이 완료되었습니다. 상단의 '사전 점검하기' 메뉴에서 첫 근로계약서를 점검해 보세요."
  - 로그인: "로그인이 완료되었습니다. 상단 메뉴에서 사전 점검하기를 눌러 계약서 점검을 시작해 보세요."
- **비밀번호 재설정**: 성공 메시지 + "로그인 화면으로 이동" 버튼
- **모달 개선**: 리셋 모드 뒤로가기 버튼, 로그인 시 "비밀번호를 잊으셨나요?" 링크

---

## 8단계: PreCheckSection 분석 결과 고도화 (2025-11-26)

### 수정된 파일
1. **components/MockContractCard.tsx**
   - 완전히 새로운 구조로 교체
   - ClauseResult 타입 및 RiskLevel 타입 export
   - 두 가지 렌더링 모드 지원:
     - Detailed Card Mode: clause prop이 있을 때 상세 카드 표시
     - Simplified Preview Mode: clause prop이 없을 때 기존 스타일 유지
   - 위험도별 색상 및 아이콘 매핑
   - 원문, 쉬운 설명, 3줄 요약, 태그 표시
   - 핵심 조항 뱃지 표시

2. **components/PreCheckSection.tsx**
   - 더미 데이터 기반 분석 결과 시뮬레이션
   - MOCK_CLAUSE_RESULTS: 4개의 예시 조항 (수습급여, 포괄임금, 퇴직금, 손해배상)
   - 위험도 필터링 기능 (ALL, RED, ORANGE, YELLOW)
   - 정렬 기능 (기본 순서, 위험도 높은 순, 위험도 낮은 순)
   - "중요 조항만 보기" 토글 버튼
   - 분석 결과 요약 헤더 (위험도별 개수 표시)
   - 함께 확인하면 좋은 서류 섹션 (4개 항목)
   - 비슷한 판례·사례 섹션 (2개 예시)
   - 법적 면책 조항 푸터

### 개선 내용
- 사용자가 분석 결과를 위험도별로 필터링 가능
- 중요 조항만 선택적으로 볼 수 있는 기능
- 위험도 순으로 정렬하여 우선순위 파악 용이
- 계약서 외 필요한 추가 서류 안내
- 유사 판례 예시로 법적 근거 이해 향상
- 더미 데이터로 UI/UX 시연 (실제 API 미연동)

### UI/UX 상세
- 위험도 필터: 버튼 스타일 토글 (선택 시 teal 배경)
- 중요 조항 필터: 테두리 버튼 (선택 시 indigo 배경)
- 정렬: Select dropdown (bg-slate-900 스타일)
- 조항 카드: 위험도별 색상 구분, 태그, 원문, 설명, 요약 포함
- 추천 서류: White 배경 카드, 2열 그리드
- 판례 사례: Slate-800 배경 카드, 2열 그리드, "자세히 보기" 버튼

---

## 현재 상태 (최종 업데이트)

### 실행 중인 서버
- 개발 서버: `http://localhost:3000/`
- 상태: 정상 작동 중 (Hot reload 활성화)

### 구현 완료 기능 (전체)
1. 랜딩 페이지 및 서비스 소개
2. 사용자 인증 (Mock, LocalStorage 기반)
3. 계약서 파일 업로드
4. Google Gemini AI 기반 실시간 분석
5. 분석 결과 표시 (위험 조항, 법률 위반, 요약)
6. 마이페이지 (프로필, 분석 이력)
7. 계정 관리 (프로필 수정, 비밀번호 변경, 계정 삭제)
8. 일일 자동 리셋되는 점검 횟수 제한
9. 비밀번호 재설정 기능
10. 반응형 디자인
11. 챗봇 페이지 (노동 관련 Q&A)
12. 전문가 연결 및 공공기관 안내 페이지
13. 요금제 페이지 및 업그레이드 연결
14. 로그인/회원가입 플로우 배선 및 환영 배너
15. **PreCheckSection 분석 결과 필터링 및 정렬**
16. **Admin 역할 기반 접근 제어 (RBAC)** (NEW)
17. **관리자 대시보드 페이지** (NEW)

---

## 9단계: 관리자 대시보드 + Admin 권한 가드 구현 (2025-11-26)

### 수정된 파일
1. **components/AuthContext.tsx**
   - UserRole 타입 추가: 'user' | 'admin'
   - User 인터페이스에 role 필드 추가
   - AuthContextValue에 isAdmin 계산된 값 추가
   - determineRole() 함수 구현: 이메일이 'admin@'로 시작하면 admin 역할 부여
   - loginWithEmail, signupWithEmail, loginWithProvider에서 role 자동 설정
   - updateProfile에서 이메일 변경 시 role 재평가
   - Provider value에 isAdmin: user?.role === 'admin' 추가

2. **components/AdminDashboardPage.tsx** (신규 파일)
   - 관리자 전용 대시보드 페이지 생성 (270줄)
   - 4개 메트릭 카드: 전체 가입자, 신규 가입, 누적 분석, 오늘 분석
   - 최근 계약서 점검 이력 테이블 (위험도 표시)
   - 최근 가입 사용자 테이블 (권한, 상태 표시)
   - 신고 및 문의 관리 카드 (상태 변경 기능)
   - 모든 데이터는 데모용 mock 데이터
   - Reveal 컴포넌트를 사용한 staggered 애니메이션
   - 반응형 그리드 레이아웃

3. **components/Navbar.tsx**
   - ShieldCheck 아이콘 import
   - useAuth에서 isAdmin 추출
   - 데스크톱 네비게이션에 관리자 링크 추가 (isAdmin인 경우만 표시)
   - 모바일 메뉴에 관리자 링크 추가 (isAdmin인 경우만 표시)
   - 관리자 링크는 indigo 색상으로 구분

4. **App.tsx**
   - Page 타입에 'admin' 추가
   - AdminDashboardPage, Lock, Reveal 컴포넌트 import
   - useAuth에서 isAdmin 추출
   - renderAdminPage() 함수 구현:
     - isAdmin이면 AdminDashboardPage 렌더링
     - 아니면 "접근 권한이 없습니다" 메시지와 Lock 아이콘 표시
   - admin 라우트 추가

### 개선 내용
- 이메일 기반 역할 자동 결정 (admin@로 시작하면 관리자)
- 관리자 전용 대시보드 페이지
- 사용자, 분석 이력, 신고 관리 통합 뷰
- 권한 없는 사용자의 관리자 페이지 접근 차단
- 관리자만 네비게이션에서 관리자 메뉴 확인 가능
- 모든 mock 데이터로 UI/UX 시연

### UI/UX 상세
- 관리자 링크: ShieldCheck 아이콘, indigo 색상
- 메트릭 카드: 4개 그리드, 각각 아이콘과 색상 구분
- 분석 이력 테이블: RED/ORANGE 위험도 숫자로 표시
- 사용자 테이블: ADMIN/USER 뱃지, Active/Blocked 상태 표시
- 신고 관리: Open/In Progress/Resolved 상태 변경 select
- 접근 거부 페이지: Lock 아이콘, 홈으로 돌아가기 버튼
- Reveal 애니메이션으로 각 섹션 staggered 진입

### 테스트 방법
1. admin@test.com 이메일로 회원가입하면 관리자 권한 부여됨
2. 일반 이메일(예: user@test.com)로 가입하면 일반 사용자 권한
3. 관리자는 네비게이션에서 "관리자" 메뉴 표시됨
4. 일반 사용자는 관리자 메뉴가 보이지 않으며, URL 직접 접근 시 접근 거부 페이지 표시

### 추가 개선 (2025-11-26 오후)
- **Gemini API 사용량 모니터링** 섹션 추가
  - 총 API 호출 수 및 오늘 호출 수
  - 사용 토큰 수 (전체 및 오늘)
  - 월 예상 비용 및 오늘 비용
  - 평균 응답 시간 및 오류율
  - API 상태 설명 (Gemini 2.0 Flash 모델 사용 중)

- **Google Analytics 4 (GA4)** 섹션 추가
  - 활성 사용자, 페이지뷰, 평균 세션 시간, 이탈률
  - 인기 페이지 TOP 5 (진행률 바 시각화)
  - 기기별 사용자 분포 (Mobile, Desktop, Tablet)
  - 최근 7일 데이터 기준

---

## 10단계: Hero 및 MockContractCard 플로팅 태그 간격 조정 (2025-11-26)

### 문제
- MockContractCard의 위험(Risk) 툴팁과 주의(Check) 툴팁이 서로 겹치는 현상
- 반응형 환경(모바일, 좁은 화면)에서 더 심하게 겹쳐 가독성 저하
- Hero 섹션의 플로팅 태그(Risk Detected, Safety Check)도 일부 화면에서 겹칠 가능성

### 수정된 파일
1. **components/MockContractCard.tsx**
   - ORANGE 섹션(주의 조항)의 상단 마진 증가
     - 변경 전: `mt-16`
     - 변경 후: `mt-24 sm:mt-28 md:mt-32` (반응형 간격)
   - RED 툴팁 z-index 상향 조정
     - 변경 전: `z-30`
     - 변경 후: `z-40` (항상 위에 표시)

2. **components/Hero.tsx**
   - 플로팅 태그 위치를 반응형으로 정밀 조정
   - Risk Detected 태그:
     - 변경 전: `top-1/4`
     - 변경 후: `top-[15%] sm:top-[18%] md:top-1/4`
   - Safety Check 태그:
     - 변경 전: `bottom-1/3`
     - 변경 후: `bottom-[20%] sm:bottom-[25%] md:bottom-1/3`
   - 두 태그 모두 `z-10` 추가로 카드 위에 표시

### 개선 내용
- MockContractCard에서 두 툴팁 간 수직 간격이 모바일에서 6rem, 태블릿 7rem, 데스크톱 8rem으로 충분히 확보됨
- RED 툴팁이 항상 최상단에 표시되어 중요도 강조
- Hero 섹션 플로팅 태그가 화면 크기에 따라 적절히 배치되어 겹침 방지
- 모든 디바이스에서 일관된 사용자 경험 제공

### UI/UX 상세
- 반응형 간격 전략:
  - 모바일(~640px): mt-24 (6rem), top-15%, bottom-20%
  - 태블릿(640px~768px): mt-28 (7rem), top-18%, bottom-25%
  - 데스크톱(768px+): mt-32 (8rem), top-25%, bottom-33%
- z-index 레이어링:
  - MockContractCard RED 툴팁: z-40
  - MockContractCard ORANGE 툴팁: z-30
  - Hero 플로팅 태그: z-10
  - 배경 그라데이션: -z-10

---

## 11단계: Hash-based 라우팅 구현 (브라우저 히스토리 통합) (2025-11-26)

### 문제
- 브라우저 뒤로가기/앞으로가기 버튼이 작동하지 않음
- 페이지 새로고침 시 항상 홈으로 돌아감
- URL이 변경되지 않아 북마크/공유 불가능
- React state만으로 네비게이션 관리

### 해결 방법
- Hash-based routing 구현 (window.location.hash 사용)
- URL 형식: `/#/check`, `/#/mypage`, `/#/admin` 등
- 브라우저 히스토리 API와 완전 통합
- 백엔드 서버 구성 불필요 (정적 배포 최적화)

### 수정된 파일
1. **App.tsx**
   - `getPageFromHash()` 함수 추가:
     - URL hash에서 현재 페이지 파싱
     - 유효하지 않은 페이지는 'home'으로 fallback
   - `handleNavigate()` 함수 추가:
     - 모든 페이지 이동을 window.location.hash로 처리
     - Protected 페이지 접근 제어 (check, mypage: 로그인 필요)
     - Admin 페이지 접근 제어 (admin: 관리자 권한 필요)
     - URL hash 업데이트 시 hashchange 이벤트 자동 발생
   - hashchange 이벤트 리스너 추가:
     - 브라우저 뒤로가기/앞으로가기 감지
     - 북마크/URL 직접 입력 지원
   - 모든 `setCurrentPage` 호출을 `handleNavigate`로 교체:
     - Navbar onNavigate prop
     - Footer onNavigate prop
     - Hero onNavigate prop
     - FAQSection onNavigate prop
     - PreCheckSection onNavigate prop
     - Admin 접근 거부 페이지 "홈으로 돌아가기" 버튼
   - 초기 페이지 상태를 `getPageFromHash()`로 설정

### 개선 내용
- 브라우저 뒤로가기/앞으로가기 완전 지원
- 페이지 새로고침 시 현재 페이지 유지
- URL 북마크 및 공유 가능
- 직접 URL 입력 지원 (예: `/#/faq`)
- Protected 페이지 자동 리다이렉트
- 백엔드 없이도 정상 작동 (Render 배포 최적화)
- 모든 기존 기능 유지 (로그인, 점검 제한 등)

### 작동 방식
1. 사용자가 링크 클릭 → handleNavigate 호출
2. handleNavigate가 window.location.hash 변경
3. hashchange 이벤트 발생
4. handleHashChange가 getPageFromHash 호출
5. setCurrentPage로 React 상태 업데이트
6. 페이지 리렌더링

### 접근 제어 로직
- **일반 페이지**: 제한 없음
- **check, mypage**: 비로그인 시 회원가입 모달 표시
- **admin**: 비관리자 시 URL 변경하되 접근 거부 페이지 표시

### URL 형식
- 홈: `/#/home` 또는 `/`
- 서비스 소개: `/#/why`
- 이용 방법: `/#/how`
- 주요 기능: `/#/features`
- 자주 묻는 질문: `/#/faq`
- 사전 점검: `/#/check`
- 마이페이지: `/#/mypage`
- 챗봇: `/#/chatbot`
- 전문가 연결: `/#/experts`
- 요금제: `/#/pricing`
- 관리자: `/#/admin`
- 개인정보처리방침: `/#/privacyPolicy`
- 이용약관: `/#/terms`
- 문의하기: `/#/contact`

### FAQ 문의하기 연결
- FAQSection.tsx의 "문의하기 페이지로 이동" 버튼이 이미 구현되어 있음
- handleContactClick이 onNavigate('contact') 호출
- App.tsx에서 FAQSection에 handleNavigate prop 전달
- Hash Router 구현으로 자동 작동 (추가 수정 불필요)

---

## 12단계: Hero 제목 줄 간격 추가 조정 (2025-11-26)

### 문제
- Hero 섹션 메인 제목의 줄 간격이 좁아 글자끼리 살짝 겹침
- 특히 큰 폰트 사이즈에서 가독성 저하
- `line-height` 조정만으로는 효과가 미미함 (텍스트가 한 줄로 인식됨)

### 수정 내용
- **components/Hero.tsx** (line 53-64)
  - 1차 시도: `leading-[1.8]` → `leading-[2.0]` (효과 미미)
  - 2차 시도: `leading-[2.0]` → `leading-[2.4]` (효과 미미)
  - 3차 최종 해결: 구조 변경
    - `<br />` 태그 제거
    - 각 줄을 `<span className="block">`으로 감싸기
    - `space-y-2 sm:space-y-3` 추가 (실제 여백)
    - `leading-[2.4]` → `leading-tight` 변경

### 개선 효과
- 각 줄 사이에 명확한 여백 추가 (모바일: 0.5rem, 데스크톱: 0.75rem)
- 글자 겹침 현상 완전 해결
- 반응형 여백으로 모든 화면 크기에서 최적화
- 깔끔하고 전문적인 타이포그래피

### 기술 상세
- 기존: `<br />` 태그로 줄바꿈 (line-height에만 의존)
- 개선: 블록 요소로 분리 + space-y utility (실제 margin 추가)
- 이점: Tailwind의 responsive spacing을 활용한 유연한 디자인

---

## 13단계: Hero 제목 4줄 구조 변경 (2025-11-26)

### 문제
- 사용자가 제목을 4개의 명확한 줄로 분리하여 표시하기를 원함
- 기존 구조에서는 3줄이었으며, "함정 조항부터 먼저"가 한 줄로 표시됨

### 수정 내용
- **components/Hero.tsx** (line 53-65)
  - 제목을 4개의 개별 블록으로 재구조화:
    1. "사인하기 전에"
    2. "함정 조항부터" (SVG 언더라인 포함)
    3. "먼저"
    4. "찾아드립니다."
  - 줄 간격 미세 조정: `space-y-2 sm:space-y-3` → `space-y-1.5 sm:space-y-2`
  - "사인하기 전에," 쉼표 제거
  - "부터 먼저" → "부터"와 "먼저"로 분리

### 개선 효과
- 각 줄의 의미가 더욱 명확하게 구분됨
- 더 균형 잡힌 시각적 레이아웃
- 짧은 줄 구성으로 모바일 가독성 향상
- 제목의 리듬감과 강조 효과 개선

### 기술 상세
- 각 줄을 독립적인 `<span className="block">` 요소로 구성
- 두 번째 줄("함정 조항부터")에만 SVG 언더라인 장식 유지
- Tailwind space-y 유틸리티로 일관된 여백 제공
- 반응형: 모바일(0.375rem), 데스크톱(0.5rem)

---

## 최종 업데이트: 2025-11-26
